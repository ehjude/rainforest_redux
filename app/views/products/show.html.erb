<% if current_user %>
	<div id="review-list">
		<h3>Reviews</h3>
		<p>Reviews for <%= @product.name %></p>
	
		<%= render :partial => "reviews" %>
		<!-- NOTE: this renders the reviews partial, but does not give it a local variable like
		render @reviews does, nor does it iterate over each item. In this case, we might use the current format because @product is an object in the controller, while @reviews isn't (it would be @product.reviews). If we want it to look for the review partial, create a local variable, and do iteration, we could use the format below -->
		<%#= render :partial => "reviews", collection: @product.reviews, as: :review %>
	</div>

	<h4>New Review</h4>
	<%= form_for([@product, @review], :remote => true) do |f| %>
		<% if @review.errors.any? %>
			<h2><%= pluralize(@review.errors.count, "error") %> probhited this review from being saved.</h2>
			<ul>
				<% @review.errors.full_messages.each do |msg| %>
					<li><%= msg %></li>
				<% end %>
			</ul>
		<% end %>

		<%= f.text_area :comment, placeholder: "Comment" %>
		<%= f.submit "Submit comment" %>
	<% end %>

<% else %>
	<p>Please <%=link_to "Login", new_session_path %> to add a review. </p>

<% end %>

